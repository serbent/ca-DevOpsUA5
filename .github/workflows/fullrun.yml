name: 01.0 Full Run

on:
    workflow_dispatch:

jobs:
    checkout:
        runs-on: ubuntu-latest

        steps:
        - uses: actions/checkout@v2
        
    create_infra:
      # Step 1: Run terraform02.yml
      uses: ./.github/workflows/terraform02.yml

    prepare_docker:
      needs: create_infra
      # Step 2: Prepare Docker VM
      uses: ./.github/workflows/PrepareDockerVM.yml
      
    run_container:
      needs: [create_infra, prepare_docker]   
      # Step 3: Run Container
      uses: ./.github/workflows/RunContainer.yml
            